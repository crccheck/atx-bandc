{% extends "base.html" %}

{% block page_head %}{{ title }}{% endblock %}

{% block extra_style %}
  <link rel="alternate" type="application/rss+xml" href="{% url 'bandc:feed' slug=view.kwargs.slug %">
  <style>
    .entry {
      backround: #EEE;
      border: 1px solid #666;
      margin-bottom: 1em;
      overflow: hidden;
      padding: 0.5em;
    }

    .thumbnail-container {
      float: left;
      margin-right: 5px;
    }
  </style>
{% endblock %}

{% block content %}
  {% if bandc %}
    <h2>
      {{ bandc }}
      <small>
        <a href="{{ bandc.homepage }}" target="_blank">Homepage</a>
      </small>
    </h2>
    <!-- {{ bandc.description }} -->
  {% else %}
    <h2>All documents</h2>
  {% endif %}
  <p>
    <a href="{% url 'bandc:feed' slug=view.kwargs.slug %}">RSS feed for this page</a>
  </p>

  {% for doc in object_list %}
    <article class="entry">
      <span class="label label-default">
        {% if not bandc %}
          {{ doc.meeting.bandc }} -
        {% endif %}
        {{ doc.meeting.date }}
      </span>
      <h4>
        {{ doc }}
        <small>
          <a href="{{ doc.url }}" target="_blank">(link)</a>
        </small>
      </h4>
      <time>{{ meeting.date }}</time>
      {% if doc.thumbnail %}
        <div class="thumbnail-container">
          <a href="{{ doc.url }}" class="thumbnail" target="_blank">
            <img src="{{ doc.thumbnail }}" alt="">
          </a>
        </div>
      {% endif %}
      {% if doc.text %}
        <p>
          {{ doc.text|truncatewords:"400" }}
        </p>
      {% endif %}
      <footer>
        <small>Scraped at: {{ doc.scraped_at }}</small>
      </footer>
    </article>
  {% endfor %}
{% endblock %}
